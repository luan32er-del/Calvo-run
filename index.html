<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Calvão Run - Versão Final</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: sans-serif; }
        canvas { display: block; background: #87CEEB; }
        
        #ui { 
            position: absolute; top: 10px; left: 10px; color: white; 
            background: rgba(0,0,0,0.7); padding: 15px; border-radius: 10px; z-index: 10;
            font-size: 18px; font-weight: bold;
        }

        .tela {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); display: none; flex-direction: column;
            justify-content: center; align-items: center; color: white; z-index: 100;
            text-align: center;
        }

        button { 
            padding: 20px 50px; font-size: 25px; cursor: pointer; 
            background: #27ae60; color: white; border: none; border-radius: 15px;
            margin-top: 20px; font-weight: bold;
        }
    </style>
</head>
<body>

    <div id="ui">
        Vidas: <span id="vidas">❤️❤️❤️❤️❤️</span><br>
        Progresso: <span id="dist">0</span>%
    </div>

    <div id="telaDerrota" class="tela">
        <h1 style="font-size: 50px; color: #e74c3c;">GAME OVER</h1>
        <p>Você não chegou na entrevista!</p>
        <button onclick="location.reload()">REINICIAR</button>
    </div>

    <div id="telaVitoria" class="tela">
        <h1 style="font-size: 50px; color: #2ecc71;">VITÓRIA!</h1>
        <p>Parabéns! Você conseguiu o emprego!</p>
        <button onclick="location.reload()">JOGAR DE NOVO</button>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Imagens
        const img = {
            calvao: new Image(), cenario: new Image(),
            espinho: new Image(), montanha: new Image(), 
            power: new Image(), predio: new Image()
        };
        img.calvao.src = 'calvao.png';
        img.cenario.src = 'cenario.png';
        img.espinho.src = 'espinho.png';
        img.montanha.src = 'montanha.png';
        img.power.src = 'power.png';
        img.predio.src = 'predioentrevista.png';

        // Configurações
        let gameActive = true;
        let baseSpeed = 7;
        let currentSpeed = baseSpeed;
        let vidas = 5;
        let progress = 0; // Vai de 0 a 100
        let invencivel = false;

        let player = { x: 50, y: canvas.height - 180, w: 85, h: 85, dy: 0, grounded: false };
        let obstacles = [];
        let items = [];

        // Controle de Pulo
        function pular() {
            if (gameActive && player.grounded) {
                player.dy = -19;
                player.grounded = false;
            }
        }
        window.addEventListener('touchstart', pular);
        window.addEventListener('mousedown', pular);

        // Geradores
        function spawn() {
            if (!gameActive) return;
            
            // Spawn Obstáculos (Espinhos ou Montanhas)
            if (progress < 95) {
                let r = Math.random();
                if (r > 0.4) {
                    // Espinho (Dano)
                    obstacles.push({ x: canvas.width, y: canvas.height - 160, w: 90, h: 90, type: 'espinho' });
                } else {
                    // Montanha (Lentidão)
                    obstacles.push({ x: canvas.width, y: canvas.height - 160, w: 100, h: 100, type: 'montanha' });
                }
            }

            // Spawn Pérola (Mais frequente agora)
            if (Math.random() > 0.6) {
                items.push({ x: canvas.width + 200, y: canvas.height - 280, w: 60, h: 60 });
            }

            setTimeout(spawn, 1200 + Math.random() * 1000);
        }

        function gameLoop() {
            if (!gameActive) return;

            // FÍSICA
            player.dy += 0.8;
            player.y += player.dy;

            if (player.y > canvas.height - 155) {
                player.y = canvas.height - 155;
                player.dy = 0;
                player.grounded = true;
            }

            // Progresso do Jogo (Aproximadamente 90 segundos)
            progress += 0.02;
            document.getElementById('dist').innerText = Math.floor(Math.min(progress, 100));

            if (progress >= 100) vitoria();

            // DESENHO
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if(img.cenario.complete) ctx.drawImage(img.cenario, 0, 0, canvas.width, canvas.height);
            
            // Chão
            ctx.fillStyle = "#5d4037"; ctx.fillRect(0, canvas.height - 70, canvas.width, 70);

            // Prédio Final
            if (progress > 95) {
                let predioX = canvas.width - ((progress - 95) * 100);
                if(img.predio.complete) ctx.drawImage(img.predio, predioX, canvas.height - 400, 300, 350);
            }

            // Personagem
            if (invencivel) { ctx.globalAlpha = 0.6; ctx.fillStyle = "blue"; ctx.fillRect(player.x-5, player.y-5, player.w+10, player.h+10); ctx.globalAlpha = 1.0; }
            if(img.calvao.complete) ctx.drawImage(img.calvao, player.x, player.y, player.w, player.h);

            // Obstáculos
            obstacles.forEach((obs, i) => {
                obs.x -= currentSpeed;
                
                let sprite = obs.type === 'espinho' ? img.espinho : img.montanha;
                if(sprite.complete) {
                    ctx.drawImage(sprite, obs.x, obs.y, obs.w, obs.h);
                } else {
                    ctx.fillStyle = obs.type === 'espinho' ? "red" : "gray";
                    ctx.fillRect(obs.x, obs.y, obs.w, obs.h);
                }

                // Colisão
                if (player.x < obs.x + obs.w - 20 && player.x + player.w > obs.x + 20 &&
                    player.y < obs.y + obs.h && player.y + player.h > obs.y) {
                    
                    if (obs.type === 'espinho' && !invencivel) {
                        vidas--;
                        obstacles.splice(i, 1);
                        document.getElementById('vidas').innerText = "❤️".repeat(vidas);
                        if(vidas <= 0) derrota();
                    } else if (obs.type === 'montanha') {
                        currentSpeed = 3; // Lento
                        setTimeout(() => { currentSpeed = invencivel ? 14 : baseSpeed; }, 500);
                    }
                }
            });

            // Itens (Pérola)
            items.forEach((p, i) => {
                p.x -= currentSpeed;
                if(img.power.complete) ctx.drawImage(img.power, p.x, p.y, p.w, p.h);
                
                if (player.x < p.x + p.w && player.x + player.w > p.x &&
                    player.y < p.y + p.h && player.y + player.h > p.y) {
                    items.splice(i, 1);
                    ativarPower();
                }
            });

            requestAnimationFrame(gameLoop);
        }

        function ativarPower() {
            invencivel = true; currentSpeed = 14;
            setTimeout(() => { invencivel = false; currentSpeed = baseSpeed; }, 8000);
        }

        function derrota() {
            gameActive = false;
            document.getElementById('telaDerrota').style.display = 'flex';
        }

        function vitoria() {
            gameActive = false;
            document.getElementById('telaVitoria').style.display = 'flex';
        }

        // Início
        spawn();
        requestAnimationFrame(gameLoop);
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Calvão Run - Versão Final</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: sans-serif; }
        canvas { display: block; background: #87CEEB; }
        
        #ui { 
            position: absolute; top: 10px; left: 10px; color: white; 
            background: rgba(0,0,0,0.7); padding: 15px; border-radius: 10px; z-index: 10;
            font-size: 18px; font-weight: bold;
        }

        .tela {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); display: none; flex-direction: column;
            justify-content: center; align-items: center; color: white; z-index: 100;
            text-align: center;
        }

        button { 
            padding: 20px 50px; font-size: 25px; cursor: pointer; 
            background: #27ae60; color: white; border: none; border-radius: 15px;
            margin-top: 20px; font-weight: bold;
        }
    </style>
</head>
<body>

    <div id="ui">
        Vidas: <span id="vidas">❤️❤️❤️❤️❤️</span><br>
        Progresso: <span id="dist">0</span>%
    </div>

    <div id="telaDerrota" class="tela">
        <h1 style="font-size: 50px; color: #e74c3c;">GAME OVER</h1>
        <p>Você não chegou na entrevista!</p>
        <button onclick="location.reload()">REINICIAR</button>
    </div>

    <div id="telaVitoria" class="tela">
        <h1 style="font-size: 50px; color: #2ecc71;">VITÓRIA!</h1>
        <p>Parabéns! Você conseguiu o emprego!</p>
        <button onclick="location.reload()">JOGAR DE NOVO</button>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Imagens
        const img = {
            calvao: new Image(), cenario: new Image(),
            espinho: new Image(), montanha: new Image(), 
            power: new Image(), predio: new Image()
        };
        img.calvao.src = 'calvao.png';
        img.cenario.src = 'cenario.png';
        img.espinho.src = 'espinho.png';
        img.montanha.src = 'montanha.png';
        img.power.src = 'power.png';
        img.predio.src = 'predioentrevista.png';

        // Configurações
        let gameActive = true;
        let baseSpeed = 7;
        let currentSpeed = baseSpeed;
        let vidas = 5;
        let progress = 0; // Vai de 0 a 100
        let invencivel = false;

        let player = { x: 50, y: canvas.height - 180, w: 85, h: 85, dy: 0, grounded: false };
        let obstacles = [];
        let items = [];

        // Controle de Pulo
        function pular() {
            if (gameActive && player.grounded) {
                player.dy = -19;
                player.grounded = false;
            }
        }
        window.addEventListener('touchstart', pular);
        window.addEventListener('mousedown', pular);

        // Geradores
        function spawn() {
            if (!gameActive) return;
            
            // Spawn Obstáculos (Espinhos ou Montanhas)
            if (progress < 95) {
                let r = Math.random();
                if (r > 0.4) {
                    // Espinho (Dano)
                    obstacles.push({ x: canvas.width, y: canvas.height - 160, w: 90, h: 90, type: 'espinho' });
                } else {
                    // Montanha (Lentidão)
                    obstacles.push({ x: canvas.width, y: canvas.height - 160, w: 100, h: 100, type: 'montanha' });
                }
            }

            // Spawn Pérola (Mais frequente agora)
            if (Math.random() > 0.6) {
                items.push({ x: canvas.width + 200, y: canvas.height - 280, w: 60, h: 60 });
            }

            setTimeout(spawn, 1200 + Math.random() * 1000);
        }

        function gameLoop() {
            if (!gameActive) return;

            // FÍSICA
            player.dy += 0.8;
            player.y += player.dy;

            if (player.y > canvas.height - 155) {
                player.y = canvas.height - 155;
                player.dy = 0;
                player.grounded = true;
            }

            // Progresso do Jogo (Aproximadamente 90 segundos)
            progress += 0.02;
            document.getElementById('dist').innerText = Math.floor(Math.min(progress, 100));

            if (progress >= 100) vitoria();

            // DESENHO
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if(img.cenario.complete) ctx.drawImage(img.cenario, 0, 0, canvas.width, canvas.height);
            
            // Chão
            ctx.fillStyle = "#5d4037"; ctx.fillRect(0, canvas.height - 70, canvas.width, 70);

            // Prédio Final
            if (progress > 95) {
                let predioX = canvas.width - ((progress - 95) * 100);
                if(img.predio.complete) ctx.drawImage(img.predio, predioX, canvas.height - 400, 300, 350);
            }

            // Personagem
            if (invencivel) { ctx.globalAlpha = 0.6; ctx.fillStyle = "blue"; ctx.fillRect(player.x-5, player.y-5, player.w+10, player.h+10); ctx.globalAlpha = 1.0; }
            if(img.calvao.complete) ctx.drawImage(img.calvao, player.x, player.y, player.w, player.h);

            // Obstáculos
            obstacles.forEach((obs, i) => {
                obs.x -= currentSpeed;
                
                let sprite = obs.type === 'espinho' ? img.espinho : img.montanha;
                if(sprite.complete) {
                    ctx.drawImage(sprite, obs.x, obs.y, obs.w, obs.h);
                } else {
                    ctx.fillStyle = obs.type === 'espinho' ? "red" : "gray";
                    ctx.fillRect(obs.x, obs.y, obs.w, obs.h);
                }

                // Colisão
                if (player.x < obs.x + obs.w - 20 && player.x + player.w > obs.x + 20 &&
                    player.y < obs.y + obs.h && player.y + player.h > obs.y) {
                    
                    if (obs.type === 'espinho' && !invencivel) {
                        vidas--;
                        obstacles.splice(i, 1);
                        document.getElementById('vidas').innerText = "❤️".repeat(vidas);
                        if(vidas <= 0) derrota();
                    } else if (obs.type === 'montanha') {
                        currentSpeed = 3; // Lento
                        setTimeout(() => { currentSpeed = invencivel ? 14 : baseSpeed; }, 500);
                    }
                }
            });

            // Itens (Pérola)
            items.forEach((p, i) => {
                p.x -= currentSpeed;
                if(img.power.complete) ctx.drawImage(img.power, p.x, p.y, p.w, p.h);
                
                if (player.x < p.x + p.w && player.x + player.w > p.x &&
                    player.y < p.y + p.h && player.y + player.h > p.y) {
                    items.splice(i, 1);
                    ativarPower();
                }
            });

            requestAnimationFrame(gameLoop);
        }

        function ativarPower() {
            invencivel = true; currentSpeed = 14;
            setTimeout(() => { invencivel = false; currentSpeed = baseSpeed; }, 8000);
        }

        function derrota() {
            gameActive = false;
            document.getElementById('telaDerrota').style.display = 'flex';
        }

        function vitoria() {
            gameActive = false;
            document.getElementById('telaVitoria').style.display = 'flex';
        }

        // Início
        spawn();
        requestAnimationFrame(gameLoop);
    </script>
</body>
</html>
